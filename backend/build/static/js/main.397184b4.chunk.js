(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,n,t){e.exports=t(39)},21:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(13),u=t.n(c),o=(t(21),t(14)),i=t(2),l=function(e){var n=e.filter,t=e.change;return r.a.createElement("form",null,r.a.createElement("p",null,"Filter shown with"),r.a.createElement("input",{value:n,onChange:t}))},m=function(e){var n=e.submit,t=e.name,a=e.number,c=e.changeName,u=e.changeNumber;return r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,"name:",r.a.createElement("input",{value:t,onChange:c})),r.a.createElement("div",null,"number:",r.a.createElement("input",{value:a,onChange:u})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},f=function(e){var n=e.search,t=e.remove;return n.map(function(e){return r.a.createElement("div",{key:e.name},r.a.createElement("p",null,e.name,": ",e.number),r.a.createElement("button",{onClick:t,id:e.id},"delete"))})},d=t(3),s=t.n(d),h="http://localhost:3001/api/persons",b=function(){return s.a.get(h).then(function(e){return e.data})},v=function(e){return s.a.post(h,e).then(function(e){return e.data})},p=function(e){return s.a.delete("".concat(h,"/").concat(e)).then(function(e){return e.data})},E=function(e,n){return s.a.put("".concat(h,"/").concat(e),n).then(function(e){return e.data})},w=function(e){var n=e.message;return null===n?null:n.includes("Added")||n.includes("Updated")?r.a.createElement("div",{className:"succes"},n):r.a.createElement("div",{className:"error"},n)},g=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],c=n[1],u=Object(a.useState)(""),d=Object(i.a)(u,2),s=d[0],h=d[1],g=Object(a.useState)(""),j=Object(i.a)(g,2),O=j[0],y=j[1],C=Object(a.useState)(""),S=Object(i.a)(C,2),k=S[0],N=S[1],L=Object(a.useState)(null),x=Object(i.a)(L,2),A=x[0],T=x[1];Object(a.useEffect)(function(){b().then(function(e){return c(e)})},[]);var D=function(){var e={name:s,number:O};v(e).then(function(e){c(t.concat(e)),h(""),y("")}).then(function(){T("Added ".concat(e.name)),setTimeout(function(){T(null)},5e3)})},I=function(e){if(window.confirm("".concat(s," is already added to the phonebook, replace old number with new one?"))){var n=t.find(function(n){return n.id===e}),a=Object(o.a)({},n,{number:O});E(e,a).then(function(n){c(t.map(function(t){return t.id!==e?t:n}))}).then(function(){T("Updated ".concat(a.name)),setTimeout(function(){T(null)},5e3)})}},J=t.filter(function(e){return e.name.toLowerCase().includes(k)});return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(w,{message:A}),r.a.createElement(l,{filter:k,change:function(e){N(e.target.value.toLowerCase())}}),r.a.createElement("h3",null,"Add a new"),r.a.createElement(m,{submit:function(e){e.preventDefault();var n=t,a=!1,r=0,c=!0,u=!1,o=void 0;try{for(var i,l=n[Symbol.iterator]();!(c=(i=l.next()).done);c=!0){var m=i.value;if(m.name.toLowerCase().includes(s.toLowerCase())){a=!0,r=m.id;break}a=!1}}catch(f){u=!0,o=f}finally{try{c||null==l.return||l.return()}finally{if(u)throw o}}a?I(r):D()},name:s,number:O,changeName:function(e){h(e.target.value)},changeNumber:function(e){y(e.target.value)}}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(f,{search:J,remove:function(e){var n=e.target.previousSibling.textContent.split(":")[0];if(window.confirm("Delete ".concat(n,"?"))){var a=parseInt(e.target.id);p(a).then(c(t.filter(function(e){return e.id!==a}))).catch(function(e){T("".concat(n," has already been removed from the server")),c(t.filter(function(e){return e.id!==a})),setTimeout(function(){T(null)},5e3)})}}}))};u.a.render(r.a.createElement(g,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.397184b4.chunk.js.map