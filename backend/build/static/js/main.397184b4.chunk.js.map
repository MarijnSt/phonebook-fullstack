{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","services/Service.js","components/Notification.js","App.js","index.js"],"names":["Filter","_ref","filter","change","react_default","a","createElement","value","onChange","PersonForm","submit","name","number","changeName","changeNumber","onSubmit","type","Persons","search","remove","map","person","key","onClick","id","baseUrl","Service","axios","get","then","response","data","newObject","post","delete","concat","put","Notification","message","includes","className","App","_useState","useState","_useState2","Object","slicedToArray","persons","setPersons","_useState3","_useState4","newName","setNewName","_useState5","_useState6","newNumber","setNewNumber","_useState7","_useState8","newFilter","setFilter","_useState9","_useState10","errorMessage","setErrorMessage","useEffect","initialPersons","addContact","personObject","newPersons","setTimeout","updateReject","window","confirm","updatePerson","find","n","changedPerson","objectSpread","returnedPerson","searchresults","toLowerCase","components_Notification","components_Filter","event","target","components_PersonForm","preventDefault","originalArr","match","updateId","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","err","return","components_Persons","deletedPerson","previousSibling","textContent","split","deleteId","parseInt","catch","error","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.397184b4.chunk.js","sourcesContent":["import React from 'react'\n\nconst Filter = ({filter, change}) => {\n    return (\n    <form>\n        <p>Filter shown with</p>\n        <input\n          value={filter}\n          onChange={change}\n        />\n    </form>\n    )\n}\n\nexport default Filter;","import React from 'react'\n\nconst PersonForm = ({submit, name, number, changeName, changeNumber}) => {\n    return (\n        <form onSubmit={submit}>\n            <div>\n            name: \n            <input\n                value={name}\n                onChange={changeName}\n            />\n            </div>\n            <div>\n            number:\n            <input \n                value={number}\n                onChange={changeNumber}\n            />\n            </div>\n            <div>\n            <button type=\"submit\">add</button>\n            </div>\n        </form>\n    )\n}\n\nexport default PersonForm","import React from 'react'\n\nconst Persons = ({search, remove}) => {\n    const numbers = () => search.map(person => \n        <div key={person.name}>\n            <p>{person.name}: {person.number}</p>\n            <button onClick={remove} id={person.id}>delete</button>\n        </div>\n    )\n\n    return (\n        numbers()\n    )\n}\n\nexport default Persons ","import axios from 'axios';\n\nconst baseUrl = 'http://localhost:3001/api/persons'\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => response.data)\n}\n\nconst create = newObject => {\n    const request = axios.post(baseUrl, newObject)\n    return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\n    return request.then(response => response.data)\n}\n\nconst remove = (id) => {\n    const request = axios.delete(`${baseUrl}/${id}`)\n    return request.then(response => response.data)\n}\n\nexport default {\n    getAll,\n    create,\n    remove,\n    update    \n}","import React from 'react'\n\nconst Notification = ({message}) => {\n    if (message === null) {\n        return null\n    } else if (message.includes('Added') || message.includes('Updated')) {\n        return (\n            <div className=\"succes\">\n                {message}\n            </div>\n        )\n    }\n\n    return (\n        <div className=\"error\">\n            {message}\n        </div>\n    )\n}\n\nexport default Notification","import React, { useState, useEffect } from 'react';\nimport Filter from './components/Filter';\nimport PersonForm from './components/PersonForm';\nimport Persons from './components/Persons';\nimport Service from './services/Service'\nimport Notification from './components/Notification'\n\nconst App = () => {\n  const [ persons, setPersons] = useState([]);\n  const [ newName, setNewName ] = useState('');\n  const [ newNumber, setNewNumber] = useState('');\n  const [ newFilter, setFilter] = useState('');\n  const [ errorMessage, setErrorMessage ] = useState(null)\n\n  useEffect(() => {\n    Service\n      .getAll()\n      .then(initialPersons => setPersons(initialPersons))\n  }, [])\n\n  const handleSubmit = (event) => {\n    event.preventDefault()\n    //check name\n    let originalArr = persons\n    let match = false\n    let updateId = 0;\n    for(let person of originalArr) {\n      if(person.name.toLowerCase().includes(newName.toLowerCase())){\n        match = true\n        updateId = person.id\n        break\n      } else {\n        match = false\n      }\n    }\n    \n    if(match){\n      //update or reject\n      updateReject(updateId)\n    } else {\n      //add\n      addContact()\n    }\n  }\n\n  const addContact = () => {\n        //add name\n    const personObject = {\n      name: newName,\n      number: newNumber\n    }\n\n    Service\n      .create(personObject)\n      .then(newPersons => {\n        setPersons(persons.concat(newPersons));\n        setNewName('');\n        setNewNumber('');\n      })\n      .then(() => {\n        setErrorMessage(`Added ${personObject.name}`)\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n      })    \n  };\n\n  const updateReject = (id) => {\n    const result = window.confirm(`${newName} is already added to the phonebook, replace old number with new one?`)\n    if(result){\n      const updatePerson = persons.find(n => n.id === id)\n      const changedPerson = {...updatePerson, number: newNumber}\n      Service\n         .update(id, changedPerson)\n         .then(returnedPerson => {\n          setPersons(persons.map(person => person.id !== id ? person : returnedPerson))\n         })\n         .then(() => {\n           setErrorMessage(`Updated ${changedPerson.name}`)\n           setTimeout(() => {\n             setErrorMessage(null)\n           }, 5000)\n         })\n    } else {\n      return\n    }\n  }\n\n  const handleChangeName = (event) => { setNewName(event.target.value) };\n  const handleChangeNumber = (event) => { setNewNumber(event.target.value) };\n  const search = (event) => { setFilter(event.target.value.toLowerCase()) };\n  const searchresults = persons.filter(person => person.name.toLowerCase().includes(newFilter));\n  \n  const deletePerson = (event) => {\n    const deletedPerson = event.target.previousSibling.textContent.split(':')[0]\n    const result = window.confirm(`Delete ${deletedPerson}?`)\n    if(result) {\n      const deleteId = parseInt(event.target.id)\n      Service\n        .remove(deleteId)\n        .then(\n          setPersons(persons.filter(person => person.id !== deleteId))\n        )\n        .catch(error => {\n          setErrorMessage(`${deletedPerson} has already been removed from the server`)\n          setPersons(persons.filter(person => person.id !== deleteId))\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 5000)\n        })\n      \n    } else {\n      return\n    }\n    \n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={errorMessage}/>\n      <Filter \n        filter={newFilter} \n        change={search}\n      />\n\n      <h3>Add a new</h3>\n      <PersonForm \n        submit={handleSubmit} \n        name={newName} \n        number={newNumber} \n        changeName={handleChangeName} \n        changeNumber={handleChangeNumber}\n      />\n      \n      <h3>Numbers</h3>\n      <Persons \n        search={searchresults} \n        remove={deletePerson}\n      />\n    </div>\n  );\n};\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}